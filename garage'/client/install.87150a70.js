import{S as a,i as s,s as r,w as e,x as o,y as t,z as l,A as c,B as n,e as f,t as i,a as d,c as p,b as u,d as m,f as h,g as v,h as b,j as E,k as g,l as I,m as y,C as L,D as $,r as D,q as x,E as B,F as T,G as w,H as P,v as U}from"./client.a25217ad.js";import"./jquery.a8cc79f8.js";import{M as V,K as A}from"./Modal.c70b38b4.js";function N(a){let s,r;return s=new V({props:{$$slots:{default:[k]},$$scope:{ctx:a}}}),s.$on("close",a[6]),{c(){e(s.$$.fragment)},l(a){o(s.$$.fragment,a)},m(a,e){t(s,a,e),r=!0},p(a,r){const e={};515&r&&(e.$$scope={dirty:r,ctx:a}),s.$set(e)},i(a){r||(l(s.$$.fragment,a),r=!0)},o(a){c(s.$$.fragment,a),r=!1},d(a){n(s,a)}}}function k(a){let s,r,f;function i(s){a[4].call(null,s)}let d={};return void 0!==a[0]&&(d.value=a[0]),s=new A({props:d}),B.push(()=>T(s,"value",i)),s.$on("submit",a[5]),{c(){e(s.$$.fragment)},l(a){o(s.$$.fragment,a)},m(a,r){t(s,a,r),f=!0},p(a,e){const o={};!r&&1&e&&(r=!0,o.value=a[0],w(()=>r=!1)),s.$set(o)},i(a){f||(l(s.$$.fragment,a),f=!0)},o(a){c(s.$$.fragment,a),f=!1},d(a){n(s,a)}}}function z(a){let s,r,e,o,t,n,x,B,T,w,U,V,A,k,z,R,C,S,K,O,H,M,F,q,W,G,J,_,Q,X,Y,Z,aa,sa,ra,ea,oa,ta,la,ca,na,fa,ia,da,pa,ua,ma,ha,va,ba,Ea,ga,Ia,ya,La,$a,Da,xa,Ba,Ta,wa,Pa,Ua,Va,Aa,Na,ka,za,Ra,ja,Ca,Sa,Ka,Oa,Ha,Ma,Fa,qa,Wa,Ga,Ja,_a,Qa,Xa,Ya,Za,as,ss,rs,es,os,ts,ls,cs,ns,fs,is,ds,ps,us=0!=a[1]&&N(a);return{c(){s=f("main"),r=f("div"),e=f("div"),o=f("h1"),t=i("Configurazione Iniziale"),n=d(),x=f("form"),B=f("p"),T=f("br"),w=d(),U=f("h4"),V=i("Impostazioni Database"),A=d(),k=f("div"),z=f("label"),R=f("i"),C=i(" Database URL"),S=d(),K=f("input"),O=d(),H=f("div"),M=f("label"),F=f("i"),q=i(" Database"),W=d(),G=f("input"),J=d(),_=f("div"),Q=f("label"),X=f("i"),Y=i(" DB Username"),Z=d(),aa=f("input"),sa=d(),ra=f("div"),ea=f("label"),oa=f("i"),ta=i(" DB Password"),la=d(),ca=f("input"),na=d(),fa=f("p"),ia=f("br"),da=d(),pa=f("h4"),ua=i("Configurazione Lavagna/VTE"),ma=d(),ha=f("div"),va=f("label"),ba=f("i"),Ea=i(" URL VTE"),ga=d(),Ia=f("input"),ya=d(),La=f("div"),$a=f("label"),Da=f("i"),xa=i(" Username VTE"),Ba=d(),Ta=f("input"),wa=d(),Pa=f("div"),Ua=f("label"),Va=f("i"),Aa=i(" Password VTE"),Na=d(),ka=f("input"),za=d(),Ra=f("div"),ja=f("label"),Ca=f("i"),Sa=i(" Access Key"),Ka=d(),Oa=f("input"),Ha=d(),Ma=f("div"),Fa=f("label"),qa=f("i"),Wa=i(" PIN Lavagna"),Ga=d(),Ja=f("input"),_a=f("br"),Qa=d(),Xa=f("a"),Ya=f("i"),Za=i("Imposta Pin"),as=d(),ss=f("br"),rs=f("br"),es=d(),os=f("button"),ts=f("i"),ls=i(" Salva"),cs=d(),ns=f("br"),fs=d(),us&&us.c(),this.h()},l(a){s=p(a,"MAIN",{role:!0,class:!0});var l=u(s);r=p(l,"DIV",{class:!0});var c=u(r);e=p(c,"DIV",{class:!0});var f=u(e);o=p(f,"H1",{});var i=u(o);t=m(i,"Configurazione Iniziale"),i.forEach(h),n=v(f),x=p(f,"FORM",{});var d=u(x);B=p(d,"P",{});var b=u(B);T=p(b,"BR",{}),b.forEach(h),w=v(d),U=p(d,"H4",{});var E=u(U);V=m(E,"Impostazioni Database"),E.forEach(h),A=v(d),k=p(d,"DIV",{class:!0});var g=u(k);z=p(g,"LABEL",{for:!0});var I=u(z);R=p(I,"I",{class:!0}),u(R).forEach(h),C=m(I," Database URL"),I.forEach(h),S=v(g),K=p(g,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),g.forEach(h),O=v(d),H=p(d,"DIV",{class:!0});var y=u(H);M=p(y,"LABEL",{for:!0});var L=u(M);F=p(L,"I",{class:!0}),u(F).forEach(h),q=m(L," Database"),L.forEach(h),W=v(y),G=p(y,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),y.forEach(h),J=v(d),_=p(d,"DIV",{class:!0});var $=u(_);Q=p($,"LABEL",{for:!0});var D=u(Q);X=p(D,"I",{class:!0}),u(X).forEach(h),Y=m(D," DB Username"),D.forEach(h),Z=v($),aa=p($,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),$.forEach(h),sa=v(d),ra=p(d,"DIV",{class:!0});var P=u(ra);ea=p(P,"LABEL",{for:!0});var N=u(ea);oa=p(N,"I",{class:!0}),u(oa).forEach(h),ta=m(N," DB Password"),N.forEach(h),la=v(P),ca=p(P,"INPUT",{type:!0,class:!0,id:!0}),P.forEach(h),na=v(d),fa=p(d,"P",{});var j=u(fa);ia=p(j,"BR",{}),j.forEach(h),da=v(d),pa=p(d,"H4",{});var is=u(pa);ua=m(is,"Configurazione Lavagna/VTE"),is.forEach(h),ma=v(d),ha=p(d,"DIV",{class:!0});var ds=u(ha);va=p(ds,"LABEL",{for:!0});var ps=u(va);ba=p(ps,"I",{class:!0}),u(ba).forEach(h),Ea=m(ps," URL VTE"),ps.forEach(h),ga=v(ds),Ia=p(ds,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),ds.forEach(h),ya=v(d),La=p(d,"DIV",{class:!0});var ms=u(La);$a=p(ms,"LABEL",{for:!0});var hs=u($a);Da=p(hs,"I",{class:!0}),u(Da).forEach(h),xa=m(hs," Username VTE"),hs.forEach(h),Ba=v(ms),Ta=p(ms,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),ms.forEach(h),wa=v(d),Pa=p(d,"DIV",{class:!0});var vs=u(Pa);Ua=p(vs,"LABEL",{for:!0});var bs=u(Ua);Va=p(bs,"I",{class:!0}),u(Va).forEach(h),Aa=m(bs," Password VTE"),bs.forEach(h),Na=v(vs),ka=p(vs,"INPUT",{type:!0,class:!0,id:!0}),vs.forEach(h),za=v(d),Ra=p(d,"DIV",{class:!0});var Es=u(Ra);ja=p(Es,"LABEL",{for:!0});var gs=u(ja);Ca=p(gs,"I",{class:!0}),u(Ca).forEach(h),Sa=m(gs," Access Key"),gs.forEach(h),Ka=v(Es),Oa=p(Es,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),Es.forEach(h),Ha=v(d),Ma=p(d,"DIV",{class:!0});var Is=u(Ma);Fa=p(Is,"LABEL",{for:!0});var ys=u(Fa);qa=p(ys,"I",{class:!0}),u(qa).forEach(h),Wa=m(ys," PIN Lavagna"),ys.forEach(h),Ga=v(Is),Ja=p(Is,"INPUT",{type:!0,class:!0,id:!0}),_a=p(Is,"BR",{}),Qa=v(Is),Xa=p(Is,"A",{href:!0,class:!0});var Ls=u(Xa);Ya=p(Ls,"I",{class:!0}),u(Ya).forEach(h),Za=m(Ls,"Imposta Pin"),Ls.forEach(h),Is.forEach(h),as=v(d),ss=p(d,"BR",{}),rs=p(d,"BR",{}),es=v(d),os=p(d,"BUTTON",{type:!0,class:!0});var $s=u(os);ts=p($s,"I",{class:!0}),u(ts).forEach(h),ls=m($s," Salva"),$s.forEach(h),cs=v(d),ns=p(d,"BR",{}),d.forEach(h),f.forEach(h),c.forEach(h),fs=v(l),us&&us.l(l),l.forEach(h),this.h()},h(){b(R,"class","fas fa-server"),b(z,"for","database"),b(K,"type","text"),b(K,"class","form-control form-control-lg"),b(K,"id","database"),b(K,"placeholder","localhost"),b(k,"class","form-group text-left"),b(F,"class","far fa-database"),b(M,"for","databasename"),b(G,"type","text"),b(G,"class","form-control form-control-lg"),b(G,"id","databasename"),b(G,"placeholder","db_board"),b(H,"class","form-group text-left"),b(X,"class","far fa-user"),b(Q,"for","username"),b(aa,"type","text"),b(aa,"class","form-control form-control-lg"),b(aa,"id","dbusername"),b(aa,"placeholder","DB Username"),b(_,"class","form-group text-left"),b(oa,"class","fal fa-lock"),b(ea,"for","dbpassword"),b(ca,"type","password"),b(ca,"class","form-control form-control-lg"),b(ca,"id","dbpassword"),b(ra,"class","form-group text-left"),b(ba,"class","far fa-user"),b(va,"for","vteurl"),b(Ia,"type","text"),b(Ia,"class","form-control form-control-lg"),b(Ia,"id","vteurl"),b(Ia,"placeholder","https://vte.vtenext.ch"),b(ha,"class","form-group text-left"),b(Da,"class","far fa-user"),b($a,"for","username"),b(Ta,"type","text"),b(Ta,"class","form-control form-control-lg"),b(Ta,"id","username"),b(Ta,"placeholder","Username"),b(La,"class","form-group text-left"),b(Va,"class","fal fa-lock"),b(Ua,"for","password"),b(ka,"type","password"),b(ka,"class","form-control form-control-lg"),b(ka,"id","password"),b(Pa,"class","form-group text-left"),b(Ca,"class","far fa-key"),b(ja,"for","accesskey"),b(Oa,"type","text"),b(Oa,"class","form-control form-control-lg"),b(Oa,"id","accesskey"),b(Oa,"placeholder","123456789"),b(Ra,"class","form-group text-left"),b(qa,"class","far fa-hand-pointer"),b(Fa,"for","pin"),b(Ja,"type","hidden"),b(Ja,"class","form-control form-control-lg"),b(Ja,"id","pin"),b(Ya,"class","fas fa-check"),b(Xa,"href","."),b(Xa,"class","btn btn-success"),b(Ma,"class","form-group text-left"),b(ts,"class","fal fa-save"),b(os,"type","submit"),b(os,"class","btn btn-success btn-lg btn-block"),b(e,"class","col-sm-6 col-md-4  text-center"),b(r,"class","row justify-content-center"),b(s,"role","main"),b(s,"class","container-fluid")},m(l,c){E(l,s,c),g(s,r),g(r,e),g(e,o),g(o,t),g(e,n),g(e,x),g(x,B),g(B,T),g(x,w),g(x,U),g(U,V),g(x,A),g(x,k),g(k,z),g(z,R),g(z,C),g(k,S),g(k,K),g(x,O),g(x,H),g(H,M),g(M,F),g(M,q),g(H,W),g(H,G),g(x,J),g(x,_),g(_,Q),g(Q,X),g(Q,Y),g(_,Z),g(_,aa),g(x,sa),g(x,ra),g(ra,ea),g(ea,oa),g(ea,ta),g(ra,la),g(ra,ca),g(x,na),g(x,fa),g(fa,ia),g(x,da),g(x,pa),g(pa,ua),g(x,ma),g(x,ha),g(ha,va),g(va,ba),g(va,Ea),g(ha,ga),g(ha,Ia),g(x,ya),g(x,La),g(La,$a),g($a,Da),g($a,xa),g(La,Ba),g(La,Ta),g(x,wa),g(x,Pa),g(Pa,Ua),g(Ua,Va),g(Ua,Aa),g(Pa,Na),g(Pa,ka),g(x,za),g(x,Ra),g(Ra,ja),g(ja,Ca),g(ja,Sa),g(Ra,Ka),g(Ra,Oa),g(x,Ha),g(x,Ma),g(Ma,Fa),g(Fa,qa),g(Fa,Wa),g(Ma,Ga),g(Ma,Ja),I(Ja,a[0]),g(Ma,_a),g(Ma,Qa),g(Ma,Xa),g(Xa,Ya),g(Xa,Za),g(x,as),g(x,ss),g(x,rs),g(x,es),g(x,os),g(os,ts),g(os,ls),g(x,cs),g(x,ns),g(s,fs),us&&us.m(s,null),is=!0,ds||(ps=[y(Ja,"input",a[2]),y(Xa,"click",L(a[3])),y(x,"submit",L(j))],ds=!0)},p(a,[r]){1&r&&I(Ja,a[0]),0!=a[1]?us?(us.p(a,r),2&r&&l(us,1)):(us=N(a),us.c(),l(us,1),us.m(s,null)):us&&(P(),c(us,1,1,()=>{us=null}),$())},i(a){is||(l(us),is=!0)},o(a){c(us),is=!1},d(a){a&&h(s),us&&us.d(),ds=!1,D(ps)}}}let R="https://lepori.vtenext.ch/";async function j(a){let s={database:a.target.database.value,databasename:a.target.databasename.value,dbusername:a.target.dbusername.value,dbpassword:a.target.dbpassword.value,vteurl:a.target.vteurl.value,username:a.target.username.value,password:a.target.password.value,accesskey:a.target.accesskey.value,pin:a.target.pin.value};const r=await fetch(R+"modules/SDK/src/modules/Webservices/boardBackend.php?action=saveConfiguration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if("true"==(await r.json()).success){var e=bootbox.alert({message:"Configurazione creata",size:"small"});setTimeout((function(){e.modal("hide"),location.reload()}),2e3)}}function C(a,s,r){let e,o=!1;x(async()=>{const a=await fetch(R+"modules/SDK/src/modules/Webservices/boardBackend.php?action=getConfigurationFile",{method:"POST",headers:{"Content-Type":"application/json"}});"true"==(await a.json()).success&&U("/")});return[e,o,function(){e=this.value,r(0,e)},()=>r(1,o=!0),function(a){e=a,r(0,e)},()=>r(1,o=!1),()=>r(1,o=!1)]}export default class extends a{constructor(a){super(),s(this,a,C,z,r,{})}}
